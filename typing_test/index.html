<!DOCTYPE html>
<html ng-app="typingApp">
<head>
    <title>Real Words Typing Test</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="app.js"></script>
</head>
<body ng-controller="TypingController as tc" ng-keydown="tc.handleKey($event)" tabindex="0">
    <div class="container">
        <div class="header">
            <h1>‚öîÔ∏è Hero's Typing Quest </h1>
            <div class="stats">
                <span>WPM: {{tc.wpm}}</span>
                <span>Accuracy: {{tc.accuracy}}%</span>
                <span>Time: {{tc.time}}s</span>
                <button ng-click="tc.showTeamNamePrompt()" ng-disabled="tc.isTesting || tc.testCompleted">
                    {{tc.testCompleted ? 'Quest Complete' : 'Begin Quest'}}
                </button>
            </div>
        </div>

        <div class="typing-area">
            <div class="words">
                <span ng-repeat="word in tc.words track by $index"
                      ng-class="{
                        'current': $index === tc.currentWordIndex,
                        'correct': word.status === 'correct',
                        'incorrect': word.status === 'incorrect'
                      }"
                      ng-bind-html="tc.highlightCurrentChar(word, $index)">
                </span>
            </div>
        </div>
    </div>

    <!-- Team Name Input Modal -->
    <div class="modal" ng-show="tc.showTeamModal">
      <div class="modal-content">
        <div class="trident">‚öîÔ∏è</div>
        <h2>Enter Your Team Name</h2>
        <p style="font-size: 0.9em; margin-bottom: 20px;">Your quest will last 30 seconds</p>
        <input type="text"
               ng-model="tc.teamName"
               placeholder="Team Name"
               class="team-name-input"
               ng-keypress="tc.handleTeamNameKeypress($event)"
               autofocus>
        <button ng-click="tc.startTestWithTeam()"
                ng-disabled="!tc.teamName || tc.teamName.trim() === ''"
                class="submit-team-btn">
          Begin Quest
        </button>
      </div>
    </div>

    <!-- Thank You Modal -->
    <div class="modal" ng-show="tc.showResultsModal">
      <div class="modal-content">
        <div class="trident">üî±</div>
        <h2>Quest Complete!</h2>
        <div class="final-stats">
          <p><strong>Team:</strong> {{tc.teamName}}</p>
          <p>‚ö° Words Per Minute: {{tc.wpm}}</p>
          <p>üéØ Accuracy: {{tc.accuracy}}%</p>
        </div>
        <p class="thank-you-message">
          May the gods of Olympus smile upon your typing prowess, hero!
        </p>
        <p class="thank-you-message" style="font-size: 0.9em; margin-top: 20px;">
          <span ng-show="tc.saveStatus === 'saving'">üìú Recording in the Oracle's scrolls...</span>
          <span ng-show="tc.saveStatus === 'success'">‚úÖ Your results have been recorded in the Oracle's scrolls!</span>
          <span ng-show="tc.saveStatus === 'error'">‚ö†Ô∏è Could not save to Oracle's scrolls, but your glory remains!</span>
        </p>
      </div>
    </div>
</body>
</html>
